<div class="player-summary-container">
  <!-- Player Selection Header -->
  <div class="player-selection-header">
    <div class="player-selector-container">
      <label for="playerId" class="player-selector-label">Select Player:</label>
      <select id="playerId" [(ngModel)]="selectedPlayerId" (change)="onPlayerIdChange()" class="player-selector">
        <option value="0">Michael Jordan</option>
        <option value="1">Pound</option>
        <option value="2">Buddy</option>
        <option value="3">Uncle Drew</option>
        <option value="4">Goofy</option>
        <option value="5">David Greene</option>
        <option value="6">Scott Howard</option>
        <option value="7">LeBron James</option>
        <option value="8">Chronos</option>
        <option value="9">Brian Newall</option>
      </select>
    </div>
    <div *ngIf="playerSummary" class="player-info">
      <h2>{{ playerSummary.name }}</h2>
      <span class="player-id">Player ID: {{ playerSummary.playerID }}</span>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading player data...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <div class="error-message">
      <h3>Error</h3>
      <p>{{ error }}</p>
      <button (click)="loadPlayerSummary()" class="retry-btn">Retry</button>
    </div>
  </div>

  <!-- Player Summary Content -->
  <div *ngIf="playerSummary && !loading && !error" class="content-container">
    
    <!-- Action Type Navigation Tabs -->
    <div class="action-type-navigation">
      <button 
        *ngFor="let action of actionTypes" 
        class="action-tab"
        [class.active]="selectedActionType === action.key"
        (click)="selectedActionType = action.key">
        {{ action.label }}
      </button>
    </div>

    <!-- Action Type Stats -->
    <div *ngIf="getActionTypeStats()" class="action-stats-container">
      <div class="action-stats-header">
        <h4>{{ getSelectedActionTypeLabel() }} Statistics</h4>
        <div class="action-count-badge" [style.background-color]="getSelectedActionTypeColor()">
          {{ getActionCount() }} Total Actions
        </div>
      </div>

      <div class="action-stats-grid">
        <div class="action-stat-item">
          <span class="action-stat-label">Shots:</span>
          <span class="action-stat-value">{{ getActionTypeStats()?.totalShotAttempts || 0 }}</span>
        </div>
        <div class="action-stat-item">
          <span class="action-stat-label">Points:</span>
          <span class="action-stat-value">{{ getActionTypeStats()?.totalPoints || 0 }}</span>
        </div>
        <div class="action-stat-item">
          <span class="action-stat-label">Passes:</span>
          <span class="action-stat-value">{{ getActionTypeStats()?.totalPasses || 0 }}</span>
        </div>
        <div class="action-stat-item">
          <span class="action-stat-label">Potential Assists:</span>
          <span class="action-stat-value">{{ getActionTypeStats()?.totalPotentialAssists || 0 }}</span>
        </div>
        <div class="action-stat-item">
          <span class="action-stat-label">Turnovers:</span>
          <span class="action-stat-value">{{ getActionTypeStats()?.totalTurnovers || 0 }}</span>
        </div>
        <div class="action-stat-item">
          <span class="action-stat-label">Passing Turnovers:</span>
          <span class="action-stat-value">{{ getActionTypeStats()?.totalPassingTurnovers || 0 }}</span>
        </div>
      </div>

      <!-- Court Visualization -->
      <div class="court-visualization">
        <h5>Court Activity Map</h5>
        <div class="court-container">
          <div class="court">
            <!-- Basketball Court Background -->
            <div class="court-lines">
              <div class="center-line"></div>
              <div class="three-point-line"></div>
              <div class="paint"></div>
              <div class="basket-rim"></div>
              <div class="basket"></div>
            </div>
            
            <!-- Shot Markers -->
            <div 
              *ngFor="let shot of getActionTypeStats()?.shots" 
              class="shot-marker"
              [style.left]="getCourtX(shot.loc[0]) + 'px'"
              [style.top]="getCourtY(shot.loc[1]) + 'px'"
              [style.background-color]="shot.points > 0 ? '#4caf50' : '#f44336'"
              [title]="'Shot: ' + shot.points + ' points at (' + shot.loc[0] + ', ' + shot.loc[1] + ')'">
            </div>
            
            <!-- Pass Lines -->
            <svg class="pass-lines" width="100%" height="100%">
              <line 
                *ngFor="let pass of getActionTypeStats()?.passes" 
                [attr.x1]="getCourtX(pass.startLoc[0])"
                [attr.y1]="getCourtY(pass.startLoc[1])"
                [attr.x2]="getCourtX(pass.endLoc[0])"
                [attr.y2]="getCourtY(pass.endLoc[1])"
                [attr.stroke]="pass.isCompleted ? '#4caf50' : '#f44336'"
                [attr.stroke-width]="pass.isPotentialAssist ? '3' : '2'"
                [attr.stroke-dasharray]="pass.isCompleted ? 'none' : '5,5'"
                [title]="'Pass: ' + (pass.isCompleted ? 'Completed' : 'Failed') + (pass.isPotentialAssist ? ' (Potential Assist)' : '')">
              </line>
            </svg>
            
            <!-- Turnover Markers -->
            <div 
              *ngFor="let turnover of getActionTypeStats()?.turnovers" 
              class="turnover-marker"
              [style.left]="getCourtX(turnover.loc[0]) + 'px'"
              [style.top]="getCourtY(turnover.loc[1]) + 'px'"
              [title]="'Turnover at (' + turnover.loc[0] + ', ' + turnover.loc[1] + ')'">
            </div>
          </div>
        </div>
        
        <div class="court-legend">
          <div class="legend-item">
            <div class="legend-marker shot-made"></div>
            <span>Made Shot</span>
          </div>
          <div class="legend-item">
            <div class="legend-marker shot-missed"></div>
            <span>Missed Shot</span>
          </div>
          <div class="legend-item">
            <div class="legend-marker pass-line"></div>
            <span>Completed Pass</span>
          </div>
          <div class="legend-item">
            <div class="legend-marker pass-line-failed"></div>
            <span>Failed Pass</span>
          </div>
          <div class="legend-item">
            <div class="legend-marker turnover"></div>
            <span>Turnover</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>